# ai_agents_CrewAI_Single_Agent

The system uses a **single-agent architecture**, where one agent specializes in multiple tasks such as translation, image conversion, and financial analysis. The agent relies on **GPT-4o** to extract parameters and make decisions, then utilizes external tools for execution. A **structured workflow** ensures efficient task handling, fast processing, and automatic result storage, with support for notifications and real-time updates.

---

## Prerequisites
Before running the agent, ensure that the following dependencies are installed and configured:

### 1. **Install Requirements**:
Run the following command to install the required dependencies:

```bash
pip install -r requirements.txt
```

### 2. Environment Variables:
Ensure you have a `.env` file containing the following variables and replace `<your_value>` with your actual credentials:

```bash
SLACK_SERVER_URL=<your_server_url>
SLACK_CHANNEL_ID=<your_channel_id>
SLACK_BOT_TOKEN=<your_bot_token>
DEEPL_API_KEY=<your_deepl_api_key>
OPENAI_API_KEY=<your_openai_api_key>
```

---

## How to Run the Agent

After creating a new virtual environment and installing the required dependencies, you can run the agent by executing the `main.py` file in the terminal:

```bash
python main.py
```

---
## Workflow

The system operates as follows:

1. **Agent Definition**  
   - A single specialized agent is responsible for handling multiple tasks (Translation, Image Conversion, Financial Analysis, etc.).
   - The agent utilizes **GPT-4o** and specific tools to execute its tasks.

2. **Task Execution**  
   - The agent processes each task sequentially based on user input.
   - Task parameters are automatically extracted using **GPT-4o**.

3. **Processing & Monitoring**  
   - Task execution is tracked, including processing time and tool usage.

4. **Saving Results**  
     The system processes tasks and generates the following outputs:

    - **Translation Output**  
        - `answers.txt`: Contains answers to the questions from `QA.txt`, translated into Japanese.

    - **Image Conversion Output**  
        - A folder storing all converted images in the specified format.

    - **Financial Analysis Output**  
        - A directory containing generated financial reports in both `.txt` and `.json` formats.

    - **Visualization Output**  
        - A folder containing financial charts created based on the analysis.

    - **Execution Summary**  
        - `agent_result.json`: Stores execution details, including thought count, tool usage count, execution time, and produced files.

5. **Sending Results**
   - Summaries of completed tasks (translations, image conversions, financial reports, and charts) are automatically sent to Slack.

---
### Additional Resources

The agent utilizes predefined resources to facilitate task execution:

- **financial_docs**: A folder containing financial documents that the agent can read to generate detailed financial reports and create corresponding charts.
- **screenshots**: A folder containing sample images for testing the conversion tool.
- **QA.txt**: A file containing sample questions in English to test the translation tool.

---

### Available Tools

The agent is equipped with the following six tools to perform various tasks efficiently:

1. **FinancialAnalysisTools**: Reads financial documents from a specified folder and generates a financial report based on the data.
2. **TranslationTools**: Translates text from a file into a target language.
3. **ConversionTools**: Converts images from one format (e.g., JPEG) to another (e.g., PNG) and saves them in the specified directory.
4. **SaveTextFileTools**: Writes generated outputs such as reports or translations to a specific file and directory.
5. **VisualizationTools**: Creates financial charts based on the data provided in the report generated by the agent.
6. **SlackTools**: Sends summaries, updates, and results to a configured Slack channel for real-time notifications.

---

## Evaluation

The evaluation process uses **GPT-4o** to verify task outputs. Running `evaluation.py` performs the following checks:

- **Image Conversion**: Ensures images were converted correctly.
- **Chart Generation**: Confirms charts were created in the expected directory.
- **Translation Quality**: Rates translations on a scale of 1 to 10 with feedback.
- **Report Evaluation**: Compares financial reports with source data and assigns a rating from 1 to 10.

Evaluation relies on `tasks.py` for input/output mapping.
